<apex:page standardController="Order" extensions="NewProformaInvoiceController" applyHtmlTag="false" docType="html-5.0" showheader="false" renderAs="Pdf" standardStylesheets="true" sidebar="false">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <style type="text/css">
            @page {
            size: 8.700in 11.5in; 
            margin-left: 0.5cm;
            margin-right: 0.5cm;
            margin-top: 0.5cm;
            margin-bottom: 0.5cm;
            }
        </style>
    </head>
    
    <body>
        <div class="content">
                <table style="width:100%;font-size:25px">
                    <tr>
                        <td style="text-align:center; line-height:1.5;">
                            <div><strong>RIVER MOBILITY PVT. LTD.</strong></div>
                            <div><strong>PROFORMA INVOICE / ESTIMATE</strong></div>
                        </td>
                    </tr>
                </table>
                <br/>
                <table style="width:100%;font-size:14px">
                    <tr>
                        <td style="line-height:1.5;">
                            Proforma Invoice No.:
                        </td>
                        <td>
                            PF-{!YEAR(TODAY())}-{!order.OrderNumber}
                        </td>
                        <td>
                            Date: 
                        </td>
                        <td>
                            {!DAY(TODAY())}/{!MONTH(TODAY())}/{!YEAR(TODAY())}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Booking Reference / Order ID:
                        </td>
                        <td>
                            {!order.Website_Order_Id__c}
                        </td>
                        <td>
                            Place of Supply:
                        </td>
                        <td>
                            {!order.Dealer__r.BillingCity}
                        </td>
                    </tr>
                </table>
                
                <br/>
                <table style="width:100%;font-size:14px">
                    <tr>
                        <td style="line-height:1.5;">
                            <div><strong>Billed From (Dealer Details)</strong></div>
                            <div>{!order.Dealer__r.Name}</div>
                            <div>{!order.Dealer__r.BillingCity} {!order.Dealer__r.BillingState}  {!order.Dealer__r.BillingPostalCode}</div>
                            <div>Email: {!dodoBillEmail} </div>
                            <div>GSTIN: {!order.Dealer__r.GSTIN_Number__c}</div>
                        </td>
                    </tr>
                </table>
                
                <br/>
                <table style="width:100%;font-size:14px">
                    <tr>
                        <td style="line-height:1.5;">
                            <div><strong>Billed To (Customer Details)</strong></div>
                            <div>{!order.Account.Name}</div>
                            <div>{!order.Account.BillingCity} {!order.Account.BillingState}  {!order.Account.BillingPostalCode}</div>
                            <div>Email: {!order.Account.Email__c}</div>
                            <div>Phone: {!order.Account.Phone}</div>
                        </td>
                    </tr>
                </table>
                
                <br/>
                <table style="width:100%;font-size:14px;border-collapse:collapse;border:1px solid;">
                    <tr style="text-align:center;">
                        <td style="padding:6px;border:1px solid;background-color:#f2f2f2;"><strong>Item Description</strong></td>
                        <td style="padding:6px;border:1px solid;background-color:#f2f2f2;"><strong>Qty</strong></td>
                        <td style="padding:6px;border:1px solid;background-color:#f2f2f2;"><strong>Unit Price</strong></td>
                        <td style="padding:6px;border:1px solid;background-color:#f2f2f2;"><strong>Total (Including Tax.)</strong></td>
                    </tr>
                    
                    <apex:repeat value="{!orderItemList}" var="OrderItem">
                        <tr>
                            <td style="padding:6px;border:1px solid;text-align:left;vertical-align:top;">
                                {!OrderItem.Product2.Name}
                            </td>
                            <td style="padding:6px;border:1px solid;text-align:right;vertical-align:top;">
                                <apex:outputText value="{0, number, #,##,###}">
                                    <apex:param value="{!OrderItem.Quantity}"/>    
                                </apex:outputText>
                            </td>
                            <td style="padding:6px;border:1px solid;text-align:right;vertical-align:top;">
                                <apex:outputText value="{0, number, #,##,###}">
                                    <apex:param value="{!OrderItem.UnitPrice}"/>
                                </apex:outputText>
                            </td>
                            <td style="padding:6px;border:1px solid;text-align:right;vertical-align:top;">
                                <apex:outputText value="{0, number, #,##,##0}">
                                    <apex:param value="{!OrderItem.Total_Price__c}"/>
                                </apex:outputText>
                            </td>
                        </tr>
                    </apex:repeat>
                </table>
                
                
                <br/>
                <table style="width:100%;font-size:14px">
                    <tr>
                        <td style="line-height:1.5;">
                            <div><strong>Pricing Summary</strong></div>                    
                            <div>
                                Order Grand Total (Ex-Showroom with GST): 
                                <apex:outputText value="{0, number, #,##,##0}">
                                    <apex:param value="{!grandTotal}"/>
                                </apex:outputText>
                            </div>
                            <div>
                                Less: Booking Amount Received:
                                <apex:outputText value="{0, number, #,##,##0}">
                                    <apex:param value="{!Order.Total_Amount_paid__c}" />
                                </apex:outputText>
                            </div>
                            <div>
                                <storng>Balance Estimate (Payable at Delivery / via Finance):
                                    <apex:outputText value="{0, number, #,##,##0}">
                                        <apex:param value="{!remainingAmount}" />
                                    </apex:outputText>
                                </storng>
                            </div>
                        </td>
                    </tr>
                </table>  
                
                <br/>
                <table style="width:100%;font-size:14px">
                    <tr>
                        <td style="line-height:1.5;">
                            Amount in Words: {!inWords}
                        </td>
                    </tr>
                </table>        
                
                <br/>
                <table style="width:100%;font-size:14px">
                    <tr>
                        <td style="line-height:1.5;">
                            <div><strong>Important Notes</strong></div>
                            <div>1. This is a Proforma / Estimate Invoice for customer reference only. </div>
                            <div>2. Actual Tax Invoice will be issued at delivery with applicable VIN, discounts, subsidies, insurance, and RTO charges. </div>
                            <div>3. Final payable amount may vary depending on statutory levies and subsidy eligibility at time of delivery. </div>
                            <div>4. This estimate may be used for third-party financing reference but has no tax validity. </div>
                        </td>
                    </tr>
                </table> 
            </div>
        <!-- div style="background:url('{!$Resource.watermark}')  no-repeat center;height:800px;font-family: Arial, Helvetica, sans-serif;">
            
        </div> -->
    </body>
</apex:page>