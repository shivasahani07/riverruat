<template>
    <lightning-layout multiple-rows>


        <!-- Sidebar Section -->
       
            <lightning-layout-item class="sidebar" size="1" style="flex-grow: 1; flex-shrink: 1; overflow-y: auto;">
               
                <ul class="menu-list" style="flex-grow: 1; overflow-y: auto;">
                        <li data-section="home" onclick={handleMenuClick} class={homeClass}>Home</li>
                        <li data-section="createNewLead" onclick={handleMenuClick} class={createNewLeadClass}>Create New
                            Lead</li>
                        <li data-section="newLeadList" onclick={handleMenuClick} class={newLeadListClass}>New Lead List
                        </li>
                        <li data-section="notAttendedLeads" onclick={handleMenuClick} class={notAttendedLeadsClass}>Not
                            Attended Leads</li>
                        <li data-section="notAttendedTestRides" onclick={handleMenuClick}
                            class={notAttendedTestRidesClass}>Not Attended Test Rides</li>
                        <li data-section="todaysTestRideList" onclick={handleMenuClick} class={todaysTestRideListClass}>
                            Today's Test Ride List</li>
                        <li data-section="notAttendedFollowups" onclick={handleMenuClick}
                            class={notAttendedFollowupsClass}>Not Attended Followups</li>
                        <li data-section="todaysFollowUpList" onclick={handleMenuClick}
                            class={todaysFollowUpListClass}>Today's Follow Up List</li>
                    </ul>
            </lightning-layout-item>
    

        <!-- Main Content Section -->
        <lightning-layout-item size="9">

            <div if:true={isHome} class="content-section">
                <lightning-card title="Lead Management" icon-name="standard:lead">
                    <div class="slds-grid slds-wrap slds-gutters slds-m-top_medium">
                        <!-- Left Summary Box -->
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-card title="Today's Summary" class="slds-m-around_x-small">
                                <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                    <tbody>
                                        <tr>
                                            <td> <a href="javascript:void(0);" data-section="newLeadList"
                                                    onclick={handleMenuClick} class={newLeadListClass}
                                                    aria-label="New Leads">
                                                    New Leads
                                                </a></td>
                                            <td>
                                                <strong>{newleadscount}</strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><a href="javascript:void(0);" data-section="notAttendedLeads"
                                                    onclick={handleMenuClick} class={notAttendedLeadsClass}
                                                    aria-label="View Not Attended Leads">
                                                    View Not Attended Leads
                                                </a></td>
                                            <td>
                                                <strong> {notattentedleadscount}</strong>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td> <a href="javascript:void(0);" data-section="notAttendedTestRides"
                                                    onclick={handleMenuClick} class={notAttendedTestRidesClass}
                                                    aria-label="Not attended Test rides">
                                                    Not attended Test rides</a></td>
                                            <td>
                                                <strong>{notattendedtestrides}</strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td> <a href="javascript:void(0);" data-section="todaysTestRideList"
                                                    onclick={handleMenuClick} class={todaysTestRideListClass}
                                                    aria-label="Today's test rides">
                                                    Today's test rides</a></td>
                                            <td>
                                                <strong>{todaytestrides}</strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td> <a href="javascript:void(0);" data-section="notAttendedFollowups"
                                                    onclick={handleMenuClick} class={notAttendedFollowupsClass}
                                                    aria-label="Not attended Follow Ups">
                                                    Not attended Follow Ups</a></td>
                                            <td>
                                                <strong>{notattendedfollowups}</strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <a href="javascript:void(0);" data-section="todaysFollowUpList"
                                                    onclick={handleMenuClick} class={todaysFollowUpListClass}
                                                    aria-label="Today's Follow Ups">
                                              Today's Follow Ups</a>
                                            </td>
                                            <td>

                                                <strong>{todayfollowups}</strong>
                                                
                                            </td>
                                        </tr>
                                    </tbody>

                                </table>
                            </lightning-card>
                        </div>

                        <!-- Right Summary Box -->
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-card title="Overal Summary - Lead Status" class="slds-m-around_x-small">
                                <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                    <tbody>
                                        <tr>
                                            <td><strong>New</strong></td>
                                            <td>{newstatusleads}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Test Ride</strong></td>
                                            <td>{testrideleads}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Follow Up</strong></td>
                                            <td>{followupleads}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Ready For Booking</strong></td>
                                            <td>{readyforbookingleads}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Convert</strong></td>
                                            <td>{convertleads}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Close Lost</strong></td>
                                            <td>{closelostleads}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </lightning-card>
                        </div>
                    </div>
                </lightning-card>



            </div>
            <div if:true={isCreateNewLead} class="content-section">Create New Lead Content</div>
            <div if:true={isNewLeadList} class="content-section">
                <div if:true={newallleadlist}>
                    <lightning-card title="Lead Details1" icon-name="standard:party_profile" >
                        <div class="slds-grid slds-wrap slds-p-around_medium">
                            <div class="slds-size--4-of-6">
                                <lightning-input type="text" placeholder="Search by Lead Name/Phone Number"
                                    value={Searchkey} onchange={handleLeadName}></lightning-input>
                            </div>
                            <div class="slds-size--2-of-6 slds-p-around_medium">
                                <lightning-button variant="brand" label="Search" onclick={handleSearchClick}>
                                </lightning-button>
                            </div>
                        </div>
                        <div class="table-container sidebar " >
                            <lightning-datatable key-field="id" data={newleads} columns={columns} show-row-number-column
                                hide-checkbox-column onrowaction={handleRowAction} class="slds-table">
                            </lightning-datatable>
                        </div>
                    </lightning-card>
                </div>
                <div if:true={newleaddetails} style="height:1000px;">
                    <lightning-card title="Lead Details123" icon-name="standard:party_profile">
                        <div if:true={leaddetailspageopen}>
                            <lightning-progress-indicator current-step={LeadStatus} type="path" variant="non-linear">
                                <template for:each={steps} for:item="step">
                                    <lightning-progress-step label={step.label} value={step.value} key={step.label}
                                        data-value={step.value} onclick={handleStepClick}>
                                    </lightning-progress-step>
                                </template>
                            </lightning-progress-indicator>
                            <lightning-layout multiple-rows="true">
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="text" label="LeadName" value={LeadName} required disabled>
                                    </lightning-input>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-combobox name="Lead Status" label=" LeadSource" value={source}
                                        placeholder="Select Progress" options={leadSourceOptions}
                                        onchange={handleChangeleadsource} disabled></lightning-combobox>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-combobox name="Lead Status" label=" Lead Status" value={LeadStatus}
                                        options={steps} onchange={handleChangeleadstatus} disabled></lightning-combobox>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="phone" label="Mobile" value={MobilePhone}
                                        onchange={handleleadmoblie} required disabled></lightning-input>
                                </lightning-layout-item>
                                <!--  <lightning-layout-item padding="around-small" size="6">
                            <lightning-input type="number" label="Customer Age" value={CustomerAge}
                                onchange={handleleadcoustmerage} disabled>
                            </lightning-input>
                        </lightning-layout-item>-->
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="Email" label="Email" value={leademail}
                                        onchange={handleleadeamil} disabled>
                                    </lightning-input>

                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="number" label="Lead Age(In Days)" value={LeadAge} disabled>
                                    </lightning-input>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="text" label="Lead Owner" value={leadowner}
                                        onchange={handleleadowner} disabled>
                                    </lightning-input>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="text" label="PS Name" value={psname} onchange={handlepsname}
                                        disabled>
                                    </lightning-input>
                                </lightning-layout-item>
                            </lightning-layout>
                            <lightning-card title="Address">
                                <div class="slds-p-around_medium">


                                    <lightning-textarea type="text" label="Street" value={street}
                                        onchange={handlestreet} disabled>
                                    </lightning-textarea>
                                    <lightning-layout>
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-input type="text" label="City" value={city} onchange={handlecity}
                                                disabled>
                                            </lightning-input>
                                        </lightning-layout-item>
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-combobox name="progress" label="Country" value={country}
                                                options={countryoptions} onchange={handlecountry} disabled>
                                            </lightning-combobox>

                                        </lightning-layout-item>
                                    </lightning-layout>
                                    <lightning-layout>
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-input type="text" label="Postal Code" value={postalCode}
                                                onchange={handlepostalcode} disabled>
                                            </lightning-input>
                                        </lightning-layout-item>
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-combobox name="progress" label="State" value={state}
                                                options={stateoptions} onchange={handlestate} disabled>
                                            </lightning-combobox>

                                        </lightning-layout-item>
                                    </lightning-layout>
                                </div>
                            </lightning-card>

                            <!-- <lightning-input-address address-label="Address" street-label="Street" city-label="City"
                            country-label="Country" postal-code-label="PostalCode" province-label="State"
                            street={street} city={city} country={country} postal-code={postalCode} province={state}
                            onchange={handleleadAddreess} field-level-help="Help Text for inputAddress field" disabled
                            class="slds-p-around_small">
                        </lightning-input-address>-->






                            <div>
                                <footer class="slds-modal__footer slds-text-align_center">
                                    <lightning-button variant="brand" label="Edit" onclick={handleEdit}
                                        class="slds-m-left_x-small">
                                    </lightning-button>

                                    <lightning-button variant="brand-outline" label="Convert"
                                        class="slds-m-left_x-small" onclick={handleLeadConvert}>
                                    </lightning-button>
                                </footer>
                            </div>
                            <template if:true={lostleadtrue}>
                                <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                    <div class="slds-modal__container">
                                        <header class="slds-modal__header">
                                            <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowuplostleadsavedeatailscancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                            <h2 class="slds-text-heading_medium">Lead Lost</h2>
                                        </header>
                                        <div class="slds-modal__content slds-p-around_medium">
                                            <lightning-combobox name="progress" label="Reason" value={reasonvalue}
                                                options={reasonoptions} onchange={reasonhandleChange}>
                                            </lightning-combobox>

                                            <lightning-input type="text" label="Cancel For Reason"
                                                value={leadcancelreason} onchange={handleleadcancelreason} required
                                                minlength="6"></lightning-input>
                                        </div>

                                        <footer class="slds-modal__footer slds-text-align_center">
                                            <lightning-button variant="success" label="Save" title="Successful action"
                                                onclick={todaysfollowuplostleadsavedeatails}
                                                class="slds-m-left_x-small">
                                            </lightning-button>
                                            <lightning-button variant="destructive" label="Cancel"
                                                onclick={todaysfollowuplostleadsavedeatailscancel}
                                                class="slds-m-left_x-small">
                                            </lightning-button>

                                        </footer>

                                    </div>
                                </section>
                                <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                            </template>
                        </div>
                        <div if:true={newedittrue}>
                            <lightning-card>
                                <lightning-progress-indicator current-step={LeadStatus} type="path"
                                    variant="non-linear">
                                    <template for:each={steps} for:item="step">
                                        <lightning-progress-step label={step.label} value={step.value} key={step.label}
                                            data-value={step.value} onclick={handleStepClick}>
                                        </lightning-progress-step>
                                    </template>
                                </lightning-progress-indicator>
                                <lightning-layout multiple-rows="true">
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="text" label="LeadName" value={LeadName} required
                                            disabled>
                                        </lightning-input>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-combobox name="Lead Status" label=" LeadSource" value={source}
                                            placeholder="Select Progress" options={leadSourceOptions}
                                            onchange={handleChangeleadsource} disabled></lightning-combobox>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-combobox name="Lead Status" label=" Lead Status" value={LeadStatus}
                                            options={steps} onchange={handleChangeleadstatus}></lightning-combobox>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="phone" label="Mobile" value={MobilePhone}
                                            onchange={handleleadmoblie} required disabled></lightning-input>
                                    </lightning-layout-item>
                                    <!--  <lightning-layout-item padding="around-small" size="6">
                            <lightning-input type="number" label="Customer Age" value={CustomerAge}
                                onchange={handleleadcoustmerage} disabled>
                            </lightning-input>
                        </lightning-layout-item>-->
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="Email" label="Email" value={leademail}
                                            onchange={handleleadeamil}>
                                        </lightning-input>

                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="number" label="Lead Age(In Days)" value={LeadAge}
                                            disabled>
                                        </lightning-input>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="text" label="Lead Owner" value={leadowner}
                                            onchange={handleleadowner} disabled>
                                        </lightning-input>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="text" label="PS Name" value={psname}
                                            onchange={handlepsname}>
                                        </lightning-input>
                                    </lightning-layout-item>
                                </lightning-layout>
                                <lightning-card title="Address">
                                    <div class="slds-p-around_medium">


                                        <lightning-textarea type="text" label="Street" value={street}
                                            onchange={handlestreet}>
                                        </lightning-textarea>
                                        <lightning-layout>
                                            <lightning-layout-item padding="around-small" size="6">
                                                <lightning-input type="text" label="City" value={city}
                                                    onchange={handlecity}>
                                                </lightning-input>
                                            </lightning-layout-item>
                                            <lightning-layout-item padding="around-small" size="6">
                                                <lightning-combobox name="progress" label="Country" value={country}
                                                    options={countryoptions} onchange={handlecountry}>
                                                </lightning-combobox>
                                            </lightning-layout-item>
                                        </lightning-layout>
                                        <lightning-layout>
                                            <lightning-layout-item padding="around-small" size="6">
                                                <lightning-input type="text" label="Postal Code" value={postalCode}
                                                    onchange={handlepostalcode}>
                                                </lightning-input>
                                            </lightning-layout-item>
                                            <lightning-layout-item padding="around-small" size="6">
                                                <lightning-combobox name="progress" label="State" value={state}
                                                    options={stateoptions} onchange={handlestate}>
                                                </lightning-combobox>
                                            </lightning-layout-item>
                                        </lightning-layout>
                                    </div>
                                </lightning-card>

                                <div class="slds-modal__content slds-p-around_medium">
                                    <lightning-radio-group name="radioGroup" label="Choose Any Action"
                                        options={chooseactionoptions} value={chooseoption}
                                        onchange={ChooseAnyactionchange} type="button"></lightning-radio-group>

                                </div>


                                <div if:true={Ridetypetrue}>

                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Select Test Ride Type"
                                            options={Ridetypeoptions} value={Ridetypevale}
                                            onchange={Ridetypeoptionschange} required type="radio">
                                        </lightning-radio-group>
                                    </div>


                                </div>
                                <template if:true={isshowTestRideModalstore}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRidestrore}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">New TestRide</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-input type="text" label="Lead Name" disabled value={LeadName}
                                                    minlength="3"></lightning-input>
                                                <!-- <lightning-input type="text" label="Test ride executive's Name"
                                            value={storeExcutiveName} onchange={handlestoreExcutiveName} minlength="3">
                                        </lightning-input> -->
                                                <!-- <lightning-input type="text" label="DL Number" value={storedlnumber}
                                            onchange={storehandledlnumber} minlength="3"></lightning-input>
                                        <template if:true={errorMessage}>
                                            <p class="slds-text-color_error">{errorMessage}</p>
                                        </template>
                                        <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            value={storeIndemnity} onchange={handlestoreCheckboxChange} unchecked
                                            required></lightning-input> -->


                                                <div class="custom-datetime">
                                                    <lightning-input type="datetime" label="Test Ride Date"
                                                        value={testridestorevaluedate}
                                                        onchange={testridestorevaluedatehandle}>

                                                    </lightning-input>
                                                    <template if:true={errordateMessage}>
                                                        <p class="slds-text-color_error">{errordateMessage}</p>
                                                    </template>
                                                </div>

                                            </div>
                                            <footer class="slds-modal__footer slds-text-align_center">
                                                <lightning-button variant="success" label="Save"
                                                    title="Successful action" onclick={handlestoresaveClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>
                                                <lightning-button variant="destructive" label="Cancel"
                                                    title="Successful action" onclick={cancelNewTestRidestrore}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>

                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>

                                <template if:true={isshowTestRideModalhome}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open ">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRidehome}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>

                                                <h2 class="slds-text-heading_medium">New TestRide</h2>
                                            </header>

                                            <!-- <lightning-layout multiple-rows="true">-->
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-input type="text" label="Lead Name" disabled value={LeadName}
                                                    minlength="3">
                                                </lightning-input>
                                                <!-- <lightning-input type="text" label="Test ride executive's Name"
                                            value={homeExcutiveName} onchange={handlehomeExcutiveName} minlength="3">
                                        </lightning-input> -->
                                                <!-- <lightning-input type="text" label="DL Number" value={homedlnumber}
                                            onchange={homehandledlnumber} minlength="3"></lightning-input>
                                        <template if:true={errorMessage}>
                                            <p class="slds-text-color_error">{errorMessage}</p>
                                        </template>
                                        <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            value={homeIndemnity} onchange={handlehomeCheckboxChange} unchecked
                                            required></lightning-input> -->
                                                <lightning-input type="datetime" name="input2" label="Test Ride Date"
                                                    value={testridehomevaluedate} onchange={testridehomevaluedatehandle}
                                                    minlength={todaysDate}>
                                                </lightning-input>
                                                <template if:true={errordateMessage}>
                                                    <p class="slds-text-color_error">{errordateMessage}</p>
                                                </template>


                                                <lightning-card title="Address">
                                                    <div class="slds-p-around_medium">


                                                        <lightning-textarea type="text" label="Street" value={street}
                                                            onchange={handlestreet}>
                                                        </lightning-textarea>
                                                        <lightning-layout>
                                                            <lightning-layout-item padding="around-small" size="6">
                                                                <lightning-input type="text" label="City" value={city}
                                                                    onchange={handlecity}>
                                                                </lightning-input>
                                                            </lightning-layout-item>
                                                            <lightning-layout-item padding="around-small" size="6">
                                                                <lightning-combobox name="progress" label="Country"
                                                                    value={country} options={countryoptions}
                                                                    onchange={handlecountry}>
                                                                </lightning-combobox>
                                                            </lightning-layout-item>
                                                        </lightning-layout>
                                                        <lightning-layout>
                                                            <lightning-layout-item padding="around-small" size="6">
                                                                <lightning-input type="text" label="Postal Code"
                                                                    value={postalCode} onchange={handlepostalcode}>
                                                                </lightning-input>
                                                            </lightning-layout-item>
                                                            <lightning-layout-item padding="around-small" size="6">
                                                                <lightning-combobox name="progress" label="State"
                                                                    value={state} options={stateoptions}
                                                                    onchange={handlestate}>
                                                                </lightning-combobox>
                                                            </lightning-layout-item>
                                                        </lightning-layout>
                                                    </div>
                                                </lightning-card>

                                                <footer class="slds-modal__footer slds-text-align_center">
                                                    <lightning-button variant="success" label="Save"
                                                        title="Successful action" onclick={handlehomesaveClick}
                                                        class="slds-m-left_x-small">
                                                    </lightning-button>
                                                    <lightning-button variant="destructive" label="Cancel"
                                                        title="Successful action" onclick={cancelNewTestRidehome}
                                                        class="slds-m-left_x-small">
                                                    </lightning-button>

                                                </footer>
                                            </div>

                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>
                                <template if:true={lostleadtrue}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowuplostleadsavedeatailscancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">Lead Lost</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-combobox name="progress" label="Reason" value={reasonvalue}
                                                    options={reasonoptions} onchange={reasonhandleChange}>
                                                </lightning-combobox>

                                                <lightning-input type="text" label="Cancel For Reason"
                                                    value={leadcancelreason} onchange={handleleadcancelreason} required
                                                    minlength="6"></lightning-input>
                                            </div>

                                            <footer class="slds-modal__footer slds-text-align_center">
                                                <lightning-button variant="success" label="Save"
                                                    title="Successful action"
                                                    onclick={todaysfollowuplostleadsavedeatails}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>
                                                <lightning-button variant="destructive" label="Cancel"
                                                    onclick={todaysfollowuplostleadsavedeatailscancel}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>

                                            </footer>

                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>


                                <template if:true={followoptionchoose}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelfollowoptionchoose}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-radio-group name="radioGroup" label="Follow Up Subject"
                                                    options={followoptionchooseoptions} value={followoptionchoosevalue}
                                                    onchange={followoptionchoosechange} required type="radio">
                                                </lightning-radio-group>
                                            </div>
                                            <footer class="slds-modal__footer slds-text-align_center">

                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>
                                <!-- <template if:true={readyforbookingoptiontrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelreadyforbookingoption}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Select Option"
                                            options={readyforbookingoptions} value={readyforbookingoption}
                                            onchange={readyforbookingoptionchange} required type="radio">
                                        </lightning-radio-group>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                    </footer>
                                </div>
                            </section>

                        </template> -->
                                <template if:true={bookedtrue}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelbookedtruecancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-input type="text" label="Enter Booking ID" value={bookingId}
                                                    onchange={bookingidhandler}></lightning-input>
                                            </div>
                                            <footer class="slds-modal__footer slds-text-align_center">
                                                <lightning-button variant="success" label="Save"
                                                    title="Successful action" onclick={handlebookidsaveClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>
                                                <lightning-button variant="destructive" label="Cancel"
                                                    title="Successful action" onclick={handlebookidcancelClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>

                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>
                                <template if:true={newfollowuptrue}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handlenewfollowupcancelClick}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <!--  <lightning-input type="text" label="Enter Followup" value={newfollowupname}
                                            onchange={followupnamehandler}></lightning-input>-->
                                                <lightning-input type="datetime" name="input2" label="Followup Date"
                                                    value={newfollowupdate} onchange={followupdatehandle}>
                                                </lightning-input>
                                                <template if:true={errordateMessage}>
                                                    <p class="slds-text-color_error">{errordateMessage}</p>
                                                </template>
                                                <lightning-input type="text" label="Follow up Feedback"
                                                    value={newFollowupfeedbck} onchange={followupfeedbackHandler}
                                                    min={todaysDate}>
                                                </lightning-input>

                                            </div>
                                            <footer class="slds-modal__footer slds-text-align_center">
                                                <lightning-button variant="success" label="Save"
                                                    title="Successful action" onclick={handlenewfollowupsaveClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>
                                                <lightning-button variant="destructive" label="Cancel"
                                                    title="Successful action" onclick={handlenewfollowupcancelClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>

                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>


                                <footer class="slds-modal__footer slds-text-align_center">
                                    <lightning-button variant="brand" label="Save" onclick={handlesave}
                                        class="slds-m-left_x-small">
                                    </lightning-button>
                                    <lightning-button variant="brand" label="Cancel" onclick={cancelclick}
                                        class="slds-m-left_x-small">
                                    </lightning-button>
                                    <div if:true={isConvert}>
                                        <!--<lightning-button variant="sucess" label="Convert" onclick={Convertclick}
                                    class="slds-m-left_x-small">
                                </lightning-button> -->
                                        <lightning-button variant="sucess" label="Convert" onclick={handleleadconvert}
                                            class="slds-m-left_x-small">
                                        </lightning-button>
                                    </div>
                                </footer>
                            </lightning-card>
                        </div>
                    </lightning-card>
                </div>

            </div>
            <div if:true={isNotAttendedLeads} class="content-section">

                <div if:true={allleadlist} style="height:515px; overflow-y: auto;">
                    <lightning-card style="height:515px;">
                        <div if:true={nlist} class=" slds-p-around_medium">
                            <div style="display: flex; align-items: center;">
                                <lightning-icon icon-name="standard:party_profile" alternative-text="Party Profile"
                                    size="small" style="margin-right: 8px;"></lightning-icon>
                                <h1><strong>New Lead List</strong></h1>
                            </div>
                        </div>
                        <div if:true={ntlist} class=" slds-p-around_medium">
                            <div style="display: flex; align-items: center;">
                                <lightning-icon icon-name="standard:party_profile" alternative-text="Party Profile"
                                    size="small" style="margin-right: 8px;"></lightning-icon>
                                <h1><strong>Not Attended Leads</strong></h1>
                            </div>

                        </div>




                        <div class=" slds-p-around_medium">

                            <lightning-input type="text" placeholder="Search by Lead Name/Phone Number"
                                value={Searchkey} onkeydown={handleKeydown}></lightning-input>
                        </div>

                        <div style="height:515px;">
                            <lightning-datatable key-field="id" data={records} columns={columns} show-row-number-column
                                hide-checkbox-column onrowaction={handleRowAction} class="slds-table">
                            </lightning-datatable>
                        </div>
                    </lightning-card>
                </div>
                <div if:true={leaddetails} style="height:515px; overflow-y: auto;">
                    <lightning-card title="Lead Details122" icon-name="standard:party_profile">
                        <div if:true={leaddetailspageopen}>
                            <lightning-progress-indicator current-step={LeadStatus} type="path" variant="non-linear">
                                <template for:each={steps} for:item="step">
                                    <lightning-progress-step label={step.label} value={step.value} key={step.label}
                                        data-value={step.value} onclick={handleStepClick}>
                                    </lightning-progress-step>
                                </template>
                            </lightning-progress-indicator>
                            <lightning-layout multiple-rows="true">
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="text" label="LeadName" value={LeadName} required disabled>
                                    </lightning-input>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-combobox name="Lead Status" label=" LeadSource" value={source}
                                        placeholder="Select Progress" options={leadSourceOptions}
                                        onchange={handleChangeleadsource} disabled></lightning-combobox>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-combobox name="Lead Status" label=" Lead Status" value={LeadStatus}
                                        options={steps} onchange={handleChangeleadstatus} disabled></lightning-combobox>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="phone" label="Mobile" value={MobilePhone}
                                        onchange={handleleadmoblie} required disabled></lightning-input>
                                </lightning-layout-item>
                                <!--  <lightning-layout-item padding="around-small" size="6">
                            <lightning-input type="number" label="Customer Age" value={CustomerAge}
                                onchange={handleleadcoustmerage} disabled>
                            </lightning-input>
                        </lightning-layout-item>-->
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="Email" label="Email" value={leademail}
                                        onchange={handleleadeamil} disabled>
                                    </lightning-input>

                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="number" label="Lead Age(In Days)" value={LeadAge} disabled>
                                    </lightning-input>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="text" label="Lead Owner" value={leadowner}
                                        onchange={handleleadowner} disabled>
                                    </lightning-input>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small" size="6">
                                    <lightning-input type="text" label="PS Name" value={psname} onchange={handlepsname}
                                        disabled>
                                    </lightning-input>
                                </lightning-layout-item>
                            </lightning-layout>
                            <lightning-card title="Address">
                                <div class="slds-p-around_medium">


                                    <lightning-textarea type="text" label="Street" value={street}
                                        onchange={handlestreet} disabled>
                                    </lightning-textarea>
                                    <lightning-layout>
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-input type="text" label="City" value={city} onchange={handlecity}
                                                disabled>
                                            </lightning-input>
                                        </lightning-layout-item>
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-combobox name="progress" label="Country" value={country}
                                                options={countryoptions} onchange={handlecountry} disabled>
                                            </lightning-combobox>

                                        </lightning-layout-item>
                                    </lightning-layout>
                                    <lightning-layout>
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-input type="text" label="Postal Code" value={postalCode}
                                                onchange={handlepostalcode} disabled>
                                            </lightning-input>
                                        </lightning-layout-item>
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-combobox name="progress" label="State" value={state}
                                                options={stateoptions} onchange={handlestate} disabled>
                                            </lightning-combobox>

                                        </lightning-layout-item>
                                    </lightning-layout>
                                </div>
                            </lightning-card>

                            <!-- <lightning-input-address address-label="Address" street-label="Street" city-label="City"
                            country-label="Country" postal-code-label="PostalCode" province-label="State"
                            street={street} city={city} country={country} postal-code={postalCode} province={state}
                            onchange={handleleadAddreess} field-level-help="Help Text for inputAddress field" disabled
                            class="slds-p-around_small">
                        </lightning-input-address>-->






                            <div>
                                <footer class="slds-modal__footer slds-text-align_center">
                                    <lightning-button variant="brand" label="Edit" onclick={handleEdit}
                                        class="slds-m-left_x-small">
                                    </lightning-button>

                                    <lightning-button variant="brand-outline" label="Convert"
                                        class="slds-m-left_x-small" onclick={handleLeadConvert}>
                                    </lightning-button>
                                </footer>
                            </div>
                            <template if:true={lostleadtrue}>
                                <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                    <div class="slds-modal__container">
                                        <header class="slds-modal__header">
                                            <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowuplostleadsavedeatailscancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                            <h2 class="slds-text-heading_medium">Lead Lost</h2>
                                        </header>
                                        <div class="slds-modal__content slds-p-around_medium">
                                            <lightning-combobox name="progress" label="Reason" value={reasonvalue}
                                                options={reasonoptions} onchange={reasonhandleChange}>
                                            </lightning-combobox>

                                            <lightning-input type="text" label="Cancel For Reason"
                                                value={leadcancelreason} onchange={handleleadcancelreason} required
                                                minlength="6"></lightning-input>
                                        </div>

                                        <footer class="slds-modal__footer slds-text-align_center">
                                            <lightning-button variant="success" label="Save" title="Successful action"
                                                onclick={todaysfollowuplostleadsavedeatails}
                                                class="slds-m-left_x-small">
                                            </lightning-button>
                                            <lightning-button variant="destructive" label="Cancel"
                                                onclick={todaysfollowuplostleadsavedeatailscancel}
                                                class="slds-m-left_x-small">
                                            </lightning-button>

                                        </footer>

                                    </div>
                                </section>
                                <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                            </template>
                        </div>
                        <div if:true={edittrue} style="height:515px; overflow-y: auto;">
                            <lightning-card>
                                <lightning-progress-indicator current-step={LeadStatus} type="path"
                                    variant="non-linear">
                                    <template for:each={steps} for:item="step">
                                        <lightning-progress-step label={step.label} value={step.value} key={step.label}
                                            data-value={step.value} onclick={handleStepClick}>
                                        </lightning-progress-step>
                                    </template>
                                </lightning-progress-indicator>
                                <lightning-layout multiple-rows="true">
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="text" label="LeadName" value={LeadName} required
                                            disabled>
                                        </lightning-input>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-combobox name="Lead Status" label=" LeadSource" value={source}
                                            placeholder="Select Progress" options={leadSourceOptions}
                                            onchange={handleChangeleadsource} disabled></lightning-combobox>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-combobox name="Lead Status" label=" Lead Status" value={LeadStatus}
                                            options={steps} onchange={handleChangeleadstatus}></lightning-combobox>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="phone" label="Mobile" value={MobilePhone}
                                            onchange={handleleadmoblie} required disabled></lightning-input>
                                    </lightning-layout-item>
                                    <!--  <lightning-layout-item padding="around-small" size="6">
                            <lightning-input type="number" label="Customer Age" value={CustomerAge}
                                onchange={handleleadcoustmerage} disabled>
                            </lightning-input>
                        </lightning-layout-item>-->
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="Email" label="Email" value={leademail}
                                            onchange={handleleadeamil}>
                                        </lightning-input>

                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="number" label="Lead Age(In Days)" value={LeadAge}
                                            disabled>
                                        </lightning-input>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="text" label="Lead Owner" value={leadowner}
                                            onchange={handleleadowner} disabled>
                                        </lightning-input>
                                    </lightning-layout-item>
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input type="text" label="PS Name" value={psname}
                                            onchange={handlepsname}>
                                        </lightning-input>
                                    </lightning-layout-item>
                                </lightning-layout>
                                <lightning-card title="Address">
                                    <div class="slds-p-around_medium">


                                        <lightning-textarea type="text" label="Street" value={street}
                                            onchange={handlestreet}>
                                        </lightning-textarea>
                                        <lightning-layout>
                                            <lightning-layout-item padding="around-small" size="6">
                                                <lightning-input type="text" label="City" value={city}
                                                    onchange={handlecity}>
                                                </lightning-input>
                                            </lightning-layout-item>
                                            <lightning-layout-item padding="around-small" size="6">
                                                <lightning-combobox name="progress" label="Country" value={country}
                                                    options={countryoptions} onchange={handlecountry}>
                                                </lightning-combobox>
                                            </lightning-layout-item>
                                        </lightning-layout>
                                        <lightning-layout>
                                            <lightning-layout-item padding="around-small" size="6">
                                                <lightning-input type="text" label="Postal Code" value={postalCode}
                                                    onchange={handlepostalcode}>
                                                </lightning-input>
                                            </lightning-layout-item>
                                            <lightning-layout-item padding="around-small" size="6">
                                                <lightning-combobox name="progress" label="State" value={state}
                                                    options={stateoptions} onchange={handlestate}>
                                                </lightning-combobox>
                                            </lightning-layout-item>
                                        </lightning-layout>
                                    </div>
                                </lightning-card>

                                <div class="slds-modal__content slds-p-around_medium">
                                    <lightning-radio-group name="radioGroup" label="Choose Any Action"
                                        options={chooseactionoptions} value={chooseoption}
                                        onchange={ChooseAnyactionchange} type="button"></lightning-radio-group>

                                </div>


                                <div if:true={Ridetypetrue}>

                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Select Test Ride Type"
                                            options={Ridetypeoptions} value={Ridetypevale}
                                            onchange={Ridetypeoptionschange} required type="radio">
                                        </lightning-radio-group>
                                    </div>


                                </div>
                                <template if:true={isshowTestRideModalstore}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRidestrore}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">New TestRide</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-input type="text" label="Lead Name" disabled value={LeadName}
                                                    minlength="3"></lightning-input>
                                                <!-- <lightning-input type="text" label="Test ride executive's Name"
                                            value={storeExcutiveName} onchange={handlestoreExcutiveName} minlength="3">
                                        </lightning-input> -->
                                                <!-- <lightning-input type="text" label="DL Number" value={storedlnumber}
                                            onchange={storehandledlnumber} minlength="3"></lightning-input>
                                        <template if:true={errorMessage}>
                                            <p class="slds-text-color_error">{errorMessage}</p>
                                        </template>
                                        <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            value={storeIndemnity} onchange={handlestoreCheckboxChange} unchecked
                                            required></lightning-input> -->


                                                <div class="custom-datetime">
                                                    <lightning-input type="datetime" label="Test Ride Date"
                                                        value={testridestorevaluedate}
                                                        onchange={testridestorevaluedatehandle}>

                                                    </lightning-input>
                                                    <template if:true={errordateMessage}>
                                                        <p class="slds-text-color_error">{errordateMessage}</p>
                                                    </template>
                                                </div>

                                            </div>
                                            <footer class="slds-modal__footer slds-text-align_center">
                                                <lightning-button variant="success" label="Save"
                                                    title="Successful action" onclick={handlestoresaveClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>
                                                <lightning-button variant="destructive" label="Cancel"
                                                    title="Successful action" onclick={cancelNewTestRidestrore}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>

                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>

                                <template if:true={isshowTestRideModalhome}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open ">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRidehome}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>

                                                <h2 class="slds-text-heading_medium">New TestRide</h2>
                                            </header>

                                            <!-- <lightning-layout multiple-rows="true">-->
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-input type="text" label="Lead Name" disabled value={LeadName}
                                                    minlength="3">
                                                </lightning-input>
                                                <!-- <lightning-input type="text" label="Test ride executive's Name"
                                            value={homeExcutiveName} onchange={handlehomeExcutiveName} minlength="3">
                                        </lightning-input> -->
                                                <!-- <lightning-input type="text" label="DL Number" value={homedlnumber}
                                            onchange={homehandledlnumber} minlength="3"></lightning-input>
                                        <template if:true={errorMessage}>
                                            <p class="slds-text-color_error">{errorMessage}</p>
                                        </template>
                                        <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            value={homeIndemnity} onchange={handlehomeCheckboxChange} unchecked
                                            required></lightning-input> -->
                                                <lightning-input type="datetime" name="input2" label="Test Ride Date"
                                                    value={testridehomevaluedate} onchange={testridehomevaluedatehandle}
                                                    minlength={todaysDate}>
                                                </lightning-input>
                                                <template if:true={errordateMessage}>
                                                    <p class="slds-text-color_error">{errordateMessage}</p>
                                                </template>


                                                <lightning-card title="Address">
                                                    <div class="slds-p-around_medium">


                                                        <lightning-textarea type="text" label="Street" value={street}
                                                            onchange={handlestreet}>
                                                        </lightning-textarea>
                                                        <lightning-layout>
                                                            <lightning-layout-item padding="around-small" size="6">
                                                                <lightning-input type="text" label="City" value={city}
                                                                    onchange={handlecity}>
                                                                </lightning-input>
                                                            </lightning-layout-item>
                                                            <lightning-layout-item padding="around-small" size="6">
                                                                <lightning-combobox name="progress" label="Country"
                                                                    value={country} options={countryoptions}
                                                                    onchange={handlecountry}>
                                                                </lightning-combobox>
                                                            </lightning-layout-item>
                                                        </lightning-layout>
                                                        <lightning-layout>
                                                            <lightning-layout-item padding="around-small" size="6">
                                                                <lightning-input type="text" label="Postal Code"
                                                                    value={postalCode} onchange={handlepostalcode}>
                                                                </lightning-input>
                                                            </lightning-layout-item>
                                                            <lightning-layout-item padding="around-small" size="6">
                                                                <lightning-combobox name="progress" label="State"
                                                                    value={state} options={stateoptions}
                                                                    onchange={handlestate}>
                                                                </lightning-combobox>
                                                            </lightning-layout-item>
                                                        </lightning-layout>
                                                    </div>
                                                </lightning-card>

                                                <footer class="slds-modal__footer slds-text-align_center">
                                                    <lightning-button variant="success" label="Save"
                                                        title="Successful action" onclick={handlehomesaveClick}
                                                        class="slds-m-left_x-small">
                                                    </lightning-button>
                                                    <lightning-button variant="destructive" label="Cancel"
                                                        title="Successful action" onclick={cancelNewTestRidehome}
                                                        class="slds-m-left_x-small">
                                                    </lightning-button>

                                                </footer>
                                            </div>

                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>
                                <template if:true={lostleadtrue}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowuplostleadsavedeatailscancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">Lead Lost</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-combobox name="progress" label="Reason" value={reasonvalue}
                                                    options={reasonoptions} onchange={reasonhandleChange}>
                                                </lightning-combobox>

                                                <lightning-input type="text" label="Cancel For Reason"
                                                    value={leadcancelreason} onchange={handleleadcancelreason} required
                                                    minlength="6"></lightning-input>
                                            </div>

                                            <footer class="slds-modal__footer slds-text-align_center">
                                                <lightning-button variant="success" label="Save"
                                                    title="Successful action"
                                                    onclick={todaysfollowuplostleadsavedeatails}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>
                                                <lightning-button variant="destructive" label="Cancel"
                                                    onclick={todaysfollowuplostleadsavedeatailscancel}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>

                                            </footer>

                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>


                                <template if:true={followoptionchoose}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelfollowoptionchoose}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-radio-group name="radioGroup" label="Follow Up Subject"
                                                    options={followoptionchooseoptions} value={followoptionchoosevalue}
                                                    onchange={followoptionchoosechange} required type="radio">
                                                </lightning-radio-group>
                                            </div>
                                            <footer class="slds-modal__footer slds-text-align_center">

                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>
                                <!-- <template if:true={readyforbookingoptiontrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelreadyforbookingoption}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Select Option"
                                            options={readyforbookingoptions} value={readyforbookingoption}
                                            onchange={readyforbookingoptionchange} required type="radio">
                                        </lightning-radio-group>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                    </footer>
                                </div>
                            </section>

                        </template> -->
                                <template if:true={bookedtrue}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelbookedtruecancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <lightning-input type="text" label="Enter Booking ID" value={bookingId}
                                                    onchange={bookingidhandler}></lightning-input>
                                            </div>
                                            <footer class="slds-modal__footer slds-text-align_center">
                                                <lightning-button variant="success" label="Save"
                                                    title="Successful action" onclick={handlebookidsaveClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>
                                                <lightning-button variant="destructive" label="Cancel"
                                                    title="Successful action" onclick={handlebookidcancelClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>

                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>
                                <template if:true={newfollowuptrue}>
                                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handlenewfollowupcancelClick}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                                <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium">
                                                <!--  <lightning-input type="text" label="Enter Followup" value={newfollowupname}
                                            onchange={followupnamehandler}></lightning-input>-->
                                                <lightning-input type="datetime" name="input2" label="Followup Date"
                                                    value={newfollowupdate} onchange={followupdatehandle}>
                                                </lightning-input>
                                                <template if:true={errordateMessage}>
                                                    <p class="slds-text-color_error">{errordateMessage}</p>
                                                </template>
                                                <lightning-input type="text" label="Follow up Feedback"
                                                    value={newFollowupfeedbck} onchange={followupfeedbackHandler}
                                                    min={todaysDate}>
                                                </lightning-input>

                                            </div>
                                            <footer class="slds-modal__footer slds-text-align_center">
                                                <lightning-button variant="success" label="Save"
                                                    title="Successful action" onclick={handlenewfollowupsaveClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>
                                                <lightning-button variant="destructive" label="Cancel"
                                                    title="Successful action" onclick={handlenewfollowupcancelClick}
                                                    class="slds-m-left_x-small">
                                                </lightning-button>

                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                                </template>


                                <footer class="slds-modal__footer slds-text-align_center">
                                    <lightning-button variant="brand" label="Save" onclick={handlesave}
                                        class="slds-m-left_x-small">
                                    </lightning-button>
                                    <lightning-button variant="brand" label="Cancel" onclick={cancelclick}
                                        class="slds-m-left_x-small">
                                    </lightning-button>
                                    <div if:true={isConvert}>
                                        <!--<lightning-button variant="sucess" label="Convert" onclick={Convertclick}
                                    class="slds-m-left_x-small">
                                </lightning-button> -->
                                        <lightning-button variant="sucess" label="Convert" onclick={handleleadconvert}
                                            class="slds-m-left_x-small">
                                        </lightning-button>
                                    </div>
                                </footer>
                            </lightning-card>
                        </div>
                    </lightning-card>
                </div>


            </div>
            <div if:true={isNotAttendedTestRides} class="content-section">
                <div style="height:515px; overflow-y: auto;">
                    <lightning-card title="Not Attended Test Rides" icon-name="custom:custom98">

                        <template if:true={recordId}>

                            <!-- <div class="slds-p-around_small slds-m-around_medium">
                        <lightning-button label="New" onclick={ridetypemodelshow} variant="brand">
                        </lightning-button>
                    </div> -->
                        </template>
                        <template if:true={Ridetypetrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelridetypepopup}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Select Ride Type"
                                            options={Ridetypeoptions} value={Ridetypevale}
                                            onchange={Ridetypeoptionschange} required type="radio">
                                        </lightning-radio-group>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={isshowTestRideModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRide}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New TestRide</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-flow flow-api-name={flowApiNameTestRide}
                                            flow-input-variables={flowInputVariables}>
                                        </lightning-flow>
                                    </div>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={btestRideRecordFound}>
                            <div class="slds-text-align_right slds-p-right_small">
                                <p> Num of Test Rides : <strong>{NotAttendedtestdriveslistsize} </strong> </p>
                            </div>


                            <div style="height:515px;">
                                <lightning-datatable key-field="id" data={NotAttendedtestdriveslist}
                                    columns={testRidecolumns} show-row-number-column hide-checkbox-column
                                    onrowaction={handleTestRideRowAction} class="slds-table">
                                </lightning-datatable>
                            </div>


                        </template>
                        <template if:true={showcancelModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closecancelModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Follow up for No Show</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input type="datetime" name="date" label="Select Date"
                                            value={newcNowshowfollowupdate} onchange={followupdatehandle}>
                                        </lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>
                                        <lightning-input type="text" label="Follow up Feedback"
                                            value={newFollowupfeedbck} onchange={followupfeedbackHandler}>
                                        </lightning-input>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <div class="slds-m-top_small slds-m-bottom_medium">
                                            <lightning-button variant="neutral" label="Cancel"
                                                onclick={closecancelModal} class="slds-m-left_x-small">
                                            </lightning-button>
                                            <lightning-button variant="brand" label="Submit"
                                                onclick={handleNoshowsaveClick} class="slds-m-left_x-small">
                                            </lightning-button>
                                        </div>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={istart}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closestartModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Prerequisites to Start Test Ride</h2>
                                    </header>

                                    <!-- Modal Body -->
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input label="Driving Licence Number" value={homedlnumber}
                                            onchange={homehandledlnumber} data-id="license"></lightning-input>
                                        <template if:true={errorMessage}>
                                            <p class="slds-text-color_error">{errorMessage}</p>
                                        </template>
                                        <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            checked={homeIndemnity} onchange={handlehomeCheckboxChange} required>
                                        </lightning-input>
                                    </div>

                                    <!-- Modal Footer -->
                                    <footer class="slds-modal__footer">
                                        <lightning-button variant="neutral" label="Cancel" onclick={closestartModal}>
                                        </lightning-button>
                                        <lightning-button variant="brand" label="Submit" onclick={startestride}>
                                        </lightning-button>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:false={bRecordFound}>
                            <div class="slds-text-align_right slds-p-right_xx-me">
                                <p> Num of FollowUps : <strong>{followupscount} </strong> </p>
                            </div>
                            <div class="slds-m-around_medium">
                                No Records Found
                            </div>
                        </template>
                        <template if:true={Rescheduledate}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={ReschedulehandleClickcancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Reschedule Date</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input type="datetime" name="date" label="Select Date"
                                            value={datevalue} min={todaysDate} onchange={handledatevalue}>
                                        </lightning-input>
                                        <lightning-combobox name="progress" label="Type" value={typevalue}
                                            options={Ridetypeoptions} onchange={handletypeValueChange}>
                                        </lightning-combobox>
                                        <template if:true={homerideAddress}>
                                            <lightning-card title="Address">
                                                <div class="slds-p-around_medium">


                                                    <lightning-textarea type="text" label="Street" value={street}
                                                        onchange={handlestreet}>
                                                    </lightning-textarea>
                                                    <lightning-layout>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-input type="text" label="City" value={city}
                                                                onchange={handlecity}>
                                                            </lightning-input>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-combobox name="progress" label="Country"
                                                                value={country} options={countryoptions}
                                                                onchange={handlecountry}>
                                                            </lightning-combobox>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                    <lightning-layout>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-input type="text" label="Postal Code"
                                                                value={postalCode} onchange={handlepostalcode}>
                                                            </lightning-input>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-combobox name="progress" label="State"
                                                                value={state} options={stateoptions}
                                                                onchange={handlestate}>
                                                            </lightning-combobox>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                </div>
                                            </lightning-card>
                                        </template>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="brand" label="Cancel" title="Primary action"
                                            onclick={ReschedulehandleClickcancel} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={reschedulesavehandleClick} class="slds-m-left_x-small">
                                        </lightning-button>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={testridefeedbackmodale}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={updatedtestdrivefeedbackcancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Feedback</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">


                                        <lightning-input type="text" label="Test Ride Feedback" value={testridefeedback}
                                            onchange={handletestridebeedback} required minlength="6"></lightning-input>
                                    </div>


                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="brand" label="Cancel" title="Primary action"
                                            onclick={updatedtestdrivefeedbackcancel} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={updatedtestdrivefeedbacksave} class="slds-m-left_x-small">
                                        </lightning-button>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={lostleadtrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowuplostleadsavedeatailscancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Lead Lost</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-combobox name="progress" label="Reason" value={reasonvalue}
                                            options={reasonoptions} onchange={reasonhandleChange}></lightning-combobox>

                                        <lightning-input type="text" label="Cancel For Reason" value={leadcancelreason}
                                            onchange={handleleadcancelreason} required minlength="6"></lightning-input>
                                    </div>

                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={todaysfollowuplostleadsave} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel"
                                            onclick={todaysfollowuplostleadsavedeatailscancel}
                                            class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={newfollowuptrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handlenewfollowupcancelClick}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <!--  <lightning-input type="text" label="Enter Followup" value={newfollowupname}
                                            onchange={followupnamehandler}></lightning-input>-->
                                        <lightning-input type="datetime" name="input2" label="Followup Date"
                                            value={newfollowupdate} onchange={followupdatehandle}></lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>
                                        <lightning-input type="text" label="Follow up Feedback"
                                            value={newFollowupfeedbck} onchange={followupfeedbackHandler}
                                            min={todaysDate}>
                                        </lightning-input>

                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={handlenewfollowupsaveClick} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel" title="Successful action"
                                            onclick={handlenewfollowupcancelClick} class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={showTestRideFeedbackModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeFeedbackModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Action to be taken</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Follow Up Subject"
                                            options={followoptionchooseoptions} value={followoptionchoosevalue}
                                            onchange={followoptionchoosechange} required type="radio">
                                        </lightning-radio-group>
                                    </div>
                                    <!-- <div class="slds-modal__content slds-p-around_medium">
                                <lightning-textarea label="Feedback" value={FeedbackValue}
                                    onchange={handleFeedbackChange}>
                                </lightning-textarea>
                            </div> -->
                                    <footer class="slds-modal__footer slds-text-align_center">

                                        <lightning-button variant="neutral" label="Cancel" onclick={closeFeedbackModal}
                                            class="slds-m-left_x-small"></lightning-button>
                                        <!-- <lightning-button variant="brand" label="Submit" onclick={submitTestRideFeedback}
                                    class="slds-m-left_x-small"></lightning-button> -->
                                    </footer>
                                </div>

                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>


                    </lightning-card>
                </div>
            </div>
            <div if:true={isTodaysTestRideList} class="content-section">
                <div style="height:515px; overflow-y: auto;">
                    <lightning-card title="Today's Test Rides" icon-name="custom:custom98">

                        <template if:true={recordId}>

                            <!-- <div class="slds-p-around_small slds-m-around_medium">
                        <lightning-button label="New" onclick={ridetypemodelshow} variant="brand">
                        </lightning-button>
                    </div> -->
                        </template>
                        <template if:true={Ridetypetrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelridetypepopup}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Select Ride Type"
                                            options={Ridetypeoptions} value={Ridetypevale}
                                            onchange={Ridetypeoptionschange} required type="radio">
                                        </lightning-radio-group>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={isshowTestRideModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRide}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New TestRide</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-flow flow-api-name={flowApiNameTestRide}
                                            flow-input-variables={flowInputVariables}>
                                        </lightning-flow>
                                    </div>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={btestRideRecordFound}>

                            <div class="slds-text-align_right slds-p-right_small">
                                <p> Num of Test Rides : <strong>{testridescount} </strong> </p>
                            </div>

                            <div style="height:515px;">
                                <lightning-datatable key-field="id" data={datatestRides} columns={testRidecolumns}
                                    show-row-number-column hide-checkbox-column onrowaction={handleTestRideRowAction}
                                    class="slds-table">
                                </lightning-datatable>
                            </div>

                        </template>
                        <template if:true={showcancelModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closecancelModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Follow up for No Show</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input type="datetime" name="date" label="Select Date"
                                            value={newcNowshowfollowupdate} onchange={followupdatehandle}>
                                        </lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>
                                        <lightning-input type="text" label="Follow up Feedback"
                                            value={newFollowupfeedbck} onchange={followupfeedbackHandler}>
                                        </lightning-input>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <div class="slds-m-top_small slds-m-bottom_medium">
                                            <lightning-button variant="neutral" label="Cancel"
                                                onclick={closecancelModal} class="slds-m-left_x-small">
                                            </lightning-button>
                                            <lightning-button variant="brand" label="Submit"
                                                onclick={handleNoshowsaveClick} class="slds-m-left_x-small">
                                            </lightning-button>
                                        </div>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={istart}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closestartModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Prerequisites to Start Test Ride</h2>
                                    </header>

                                    <!-- Modal Body -->
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input label="Driving Licence Number" value={homedlnumber}
                                            onchange={homehandledlnumber} data-id="license"></lightning-input>
                                        <template if:true={errorMessage}>
                                            <p class="slds-text-color_error">{errorMessage}</p>
                                        </template>
                                        <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            checked={homeIndemnity} onchange={handlehomeCheckboxChange} required>
                                        </lightning-input>
                                    </div>

                                    <!-- Modal Footer -->
                                    <footer class="slds-modal__footer">
                                        <lightning-button variant="neutral" label="Cancel" onclick={closestartModal}>
                                        </lightning-button>
                                        <lightning-button variant="brand" label="Submit" onclick={startestride}>
                                        </lightning-button>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:false={bRecordFound}>
                            <div class="slds-text-align_right slds-p-right_xx-me">
                                <p> Num of FollowUps : <strong>{followupscount} </strong> </p>
                            </div>
                            <div class="slds-m-around_medium">
                                No Records Found
                            </div>
                        </template>
                        <template if:true={Rescheduledate}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={ReschedulehandleClickcancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Reschedule Date</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input type="datetime" name="date" label="Select Date"
                                            value={datevalue} min={todaysDate} onchange={handledatevalue}>
                                        </lightning-input>
                                        <lightning-combobox name="progress" label="Type" value={typevalue}
                                            options={Ridetypeoptions} onchange={handletypeValueChange}>
                                        </lightning-combobox>
                                        <template if:true={homerideAddress}>
                                            <lightning-card title="Address">
                                                <div class="slds-p-around_medium">


                                                    <lightning-textarea type="text" label="Street" value={street}
                                                        onchange={handlestreet}>
                                                    </lightning-textarea>
                                                    <lightning-layout>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-input type="text" label="City" value={city}
                                                                onchange={handlecity}>
                                                            </lightning-input>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-combobox name="progress" label="Country"
                                                                value={country} options={countryoptions}
                                                                onchange={handlecountry}>
                                                            </lightning-combobox>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                    <lightning-layout>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-input type="text" label="Postal Code"
                                                                value={postalCode} onchange={handlepostalcode}>
                                                            </lightning-input>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-combobox name="progress" label="State"
                                                                value={state} options={stateoptions}
                                                                onchange={handlestate}>
                                                            </lightning-combobox>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                </div>
                                            </lightning-card>
                                        </template>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="brand" label="Cancel" title="Primary action"
                                            onclick={ReschedulehandleClickcancel} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={reschedulesavehandleClick} class="slds-m-left_x-small">
                                        </lightning-button>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={testridefeedbackmodale}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={updatedtestdrivefeedbackcancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Feedback</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">


                                        <lightning-input type="text" label="Test Ride Feedback" value={testridefeedback}
                                            onchange={handletestridebeedback} required minlength="6"></lightning-input>
                                    </div>


                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="brand" label="Cancel" title="Primary action"
                                            onclick={updatedtestdrivefeedbackcancel} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={updatedtestdrivefeedbacksave} class="slds-m-left_x-small">
                                        </lightning-button>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={lostleadtrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowuplostleadsavedeatailscancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Lead Lost</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-combobox name="progress" label="Reason" value={reasonvalue}
                                            options={reasonoptions} onchange={reasonhandleChange}></lightning-combobox>

                                        <lightning-input type="text" label="Cancel For Reason" value={leadcancelreason}
                                            onchange={handleleadcancelreason} required minlength="6"></lightning-input>
                                    </div>

                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={todaysfollowuplostleadsave} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel"
                                            onclick={todaysfollowuplostleadsavedeatailscancel}
                                            class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={newfollowuptrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handlenewfollowupcancelClick}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <!--  <lightning-input type="text" label="Enter Followup" value={newfollowupname}
                                            onchange={followupnamehandler}></lightning-input>-->
                                        <lightning-input type="datetime" name="input2" label="Followup Date"
                                            value={newfollowupdate} onchange={followupdatehandle}></lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>
                                        <lightning-input type="text" label="Follow up Feedback"
                                            value={newFollowupfeedbck} onchange={followupfeedbackHandler}
                                            min={todaysDate}>
                                        </lightning-input>

                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={handlenewfollowupsaveClick} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel" title="Successful action"
                                            onclick={handlenewfollowupcancelClick} class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={showTestRideFeedbackModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeFeedbackModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Action to be taken</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Follow Up Subject"
                                            options={followoptionchooseoptions} value={followoptionchoosevalue}
                                            onchange={followoptionchoosechange} required type="radio">
                                        </lightning-radio-group>
                                    </div>
                                    <!-- <div class="slds-modal__content slds-p-around_medium">
                                <lightning-textarea label="Feedback" value={FeedbackValue}
                                    onchange={handleFeedbackChange}>
                                </lightning-textarea>
                            </div> -->
                                    <footer class="slds-modal__footer slds-text-align_center">

                                        <lightning-button variant="neutral" label="Cancel" onclick={closeFeedbackModal}
                                            class="slds-m-left_x-small"></lightning-button>
                                        <!-- <lightning-button variant="brand" label="Submit" onclick={submitTestRideFeedback}
                                    class="slds-m-left_x-small"></lightning-button> -->
                                    </footer>
                                </div>

                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>


                    </lightning-card>
                </div>
            </div>
            <div if:true={isNotAttendedFollowups} class="content-section">
                <div style="height:515px; overflow-y: auto;">
                    <lightning-card title="Not Attended FollowUps" icon-name="custom:custom63" style="height:720px;">
                        <div class="slds-text-align_right slds-p-right_small">
                            <p> Num of FollowUps:<strong>{NotAttendedfllowupslistsize} </strong> </p>
                        </div>
                        <template if:true={recordId}>
                            <!--  <div class="slds-p-around_small slds-m-around_medium">
                        <lightning-button label="New" onclick={showModalBox} variant="brand">
                        </lightning-button>
                    </div> -->
                        </template>
                        <template if:true={isShowModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewFollowUp}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-flow flow-api-name={flowApiName}
                                            flow-input-variables={flowInputVariables}>
                                        </lightning-flow>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>

                        </template>
                        <template if:true={bRecordFound}>

                            <div style="height:515px;">
                                <lightning-datatable key-field="id" data={NotAttendedfllowupslist}
                                    columns={followUpColumns} show-row-number-column hide-checkbox-column
                                    onrowaction={handleFolluwUpRowAction} class="slds-table">
                                </lightning-datatable>
                            </div>
                        </template>
                        <template if:false={bRecordFound}>
                            <div class="slds-m-around_medium">
                                No Records Found
                            </div>
                        </template>
                        <template if:true={showFeedbackModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeFeedbackModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Provide Feedback</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium" style="padding-bottom: 34%;">
                                        <lightning-textarea label="Feedback" value={FeedbackValue}
                                            onchange={handleFeedbackChange}></lightning-textarea>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                        <lightning-button variant="neutral" label="Cancel" onclick={closeFeedbackModal}
                                            class="slds-m-left_x-small"></lightning-button>
                                        <lightning-button variant="brand" label="Submit" onclick={handlefeedbacksubmit}
                                            class="slds-m-left_x-small"></lightning-button>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={shownewfollowupModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handlenewfollowupcancelClick}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Action To be taken</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" options={todayfollowupchooseoptions}
                                            value={todayfollowupchooseoptionsvalue}
                                            onchange={todayfollowupchooseoptionshandlechange} type="radio">
                                        </lightning-radio-group>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                    </footer>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={newfollowupModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handlenewfollowupcancelClick}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <!--  <lightning-input type="text" label="Enter Followup" value={newfollowupname}
                                            onchange={followupnamehandler}></lightning-input>-->
                                        <lightning-input type="datetime" name="input2" label="Followup Date"
                                            value={newfollowupdate} onchange={followupdatehandle}></lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>
                                        <lightning-input type="text" label="Follow up Feedback"
                                            value={newFollowupfeedbck} onchange={followupfeedbackHandler}
                                            min={todaysDate}>
                                        </lightning-input>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={newfollowupsubmit} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel" title="Successful action"
                                            onclick={handlenewfollowupcancelClick} class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={isshowTestRideModalstore}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRidestrore}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New TestRide</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input type="text" label="Lead Name" disabled value={LeadName}
                                            minlength="3">
                                        </lightning-input>
                                        <!-- <lightning-input type="text" label="Test ride executive's Name"
                                            value={storeExcutiveName} onchange={handlestoreExcutiveName} minlength="3">
                                        </lightning-input> -->
                                        <!-- <lightning-input type="text" label="DL Number" value={storedlnumber}
                                            onchange={storehandledlnumber} minlength="3"></lightning-input>
                                        <template if:true={errorMessage}>
                                            <p class="slds-text-color_error">{errorMessage}</p>
                                        </template>
                                        <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            value={storeIndemnity} onchange={handlestoreCheckboxChange} unchecked
                                            required></lightning-input> -->



                                        <lightning-input type="datetime" label="Test Ride Date"
                                            value={testridestorevaluedate} onchange={testridestorevaluedatehandle}>

                                        </lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>

                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={todaysfollowuphandlestoresaveClick} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel" title="Successful action"
                                            onclick={cancelNewTestRidestrore} class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={isshowTestRideModalhome}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open ">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRidehome}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>

                                        <h2 class="slds-text-heading_medium">New TestRide</h2>
                                    </header>

                                    <!-- <lightning-layout multiple-rows="true">-->
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input type="text" label="Lead Name" disabled value={LeadName}
                                            minlength="3">
                                        </lightning-input>
                                        <!-- <lightning-input type="text" label="Test ride executive's Name"
                                            value={homeExcutiveName} onchange={handlehomeExcutiveName} minlength="3">
                                        </lightning-input> -->
                                        <!-- <lightning-input type="text" label="DL Number" value={homedlnumber}
                                    onchange={homehandledlnumber} minlength="3"></lightning-input>
                                <template if:true={errorMessage}>
                                    <p class="slds-text-color_error">{errorMessage}</p>
                                </template> -->
                                        <!-- <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            value={homeIndemnity} onchange={handlehomeCheckboxChange} unchecked
                                            required></lightning-input>-->
                                        <lightning-input type="datetime" name="input2" label="Test Ride Date"
                                            value={testridehomevaluedate} onchange={testridehomevaluedatehandle}
                                            minlength={todaysDate}>
                                        </lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>


                                        <lightning-card title="Address">
                                            <div class="slds-p-around_medium">


                                                <lightning-textarea type="text" label="Street" value={street}
                                                    onchange={handlestreet}>
                                                </lightning-textarea>
                                                <lightning-layout>
                                                    <lightning-layout-item padding="around-small" size="6">
                                                        <lightning-input type="text" label="City" value={city}
                                                            onchange={handlecity}>
                                                        </lightning-input>
                                                    </lightning-layout-item>
                                                    <lightning-layout-item padding="around-small" size="6">
                                                        <lightning-combobox name="progress" label="Country"
                                                            value={country} options={countryoptions}
                                                            onchange={handlecountry}>
                                                        </lightning-combobox>
                                                    </lightning-layout-item>
                                                </lightning-layout>
                                                <lightning-layout>
                                                    <lightning-layout-item padding="around-small" size="6">
                                                        <lightning-input type="text" label="Postal Code"
                                                            value={postalCode} onchange={handlepostalcode}>
                                                        </lightning-input>
                                                    </lightning-layout-item>
                                                    <lightning-layout-item padding="around-small" size="6">
                                                        <lightning-combobox name="progress" label="State" value={state}
                                                            options={stateoptions} onchange={handlestate}>
                                                        </lightning-combobox>
                                                    </lightning-layout-item>
                                                </lightning-layout>
                                            </div>
                                        </lightning-card>

                                        <footer class="slds-modal__footer slds-text-align_center">
                                            <lightning-button variant="success" label="Save" title="Successful action"
                                                onclick={todaysfollowuphandlehomesaveClick} class="slds-m-left_x-small">
                                            </lightning-button>
                                            <lightning-button variant="destructive" label="Cancel"
                                                title="Successful action" onclick={cancelNewTestRidehome}
                                                class="slds-m-left_x-small">
                                            </lightning-button>

                                        </footer>
                                    </div>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={Ridetypetrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowupRidetypetruecancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Select Test Ride Type"
                                            options={Ridetypeoptions} value={Ridetypevale}
                                            onchange={Ridetypeoptionschange} required type="radio">
                                        </lightning-radio-group>
                                    </div>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={lostleadtrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowuplostleadcancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Lead Lost</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-combobox name="progress" label="Reason" value={reasonvalue}
                                            options={reasonoptions} onchange={reasonhandleChange}></lightning-combobox>

                                        <lightning-input type="text" label="Cancel For Reason" value={leadcancelreason}
                                            onchange={handleleadcancelreason} required minlength="6"></lightning-input>
                                    </div>

                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={todaysfollowuplostleadsave} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel" title="Successful action"
                                            onclick={todaysfollowuplostleadcancel} class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>



                    </lightning-card>
                </div>

            </div>
            <div if:true={isTodaysFollowUpList} class="content-section">
                <div style="height:515px; overflow-y: auto;">
                    <lightning-card title="Today's FollowUp" icon-name="custom:custom63" style="height:720px;">
                        <div class="slds-text-align_right slds-p-right_small">
                            <p> Num of FollowUps:<strong>{followupscount} </strong> </p>
                        </div>
                        <template if:true={recordId}>
                            <!--  <div class="slds-p-around_small slds-m-around_medium">
                        <lightning-button label="New" onclick={showModalBox} variant="brand">
                        </lightning-button>
                    </div> -->
                        </template>
                        <template if:true={isShowModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewFollowUp}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-flow flow-api-name={flowApiName}
                                            flow-input-variables={flowInputVariables}>
                                        </lightning-flow>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>

                        </template>
                        <template if:true={bRecordFound}>

                            <div class="table-container sidebar " style="height:515px;">
                                <lightning-datatable key-field="id" data={dataFolloUp} columns={followUpColumns}
                                    show-row-number-column hide-checkbox-column onrowaction={handleFolluwUpRowAction}
                                    class="slds-table">
                                </lightning-datatable>
                            </div>
                        </template>
                        <template if:false={bRecordFound}>
                            <div class="slds-m-around_medium">
                                No Records Found
                            </div>
                        </template>
                        <template if:true={showFeedbackModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeFeedbackModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Provide Feedback</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium" style="padding-bottom: 34%;">
                                        <lightning-textarea label="Feedback" value={FeedbackValue}
                                            onchange={handleFeedbackChange}></lightning-textarea>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                        <lightning-button variant="neutral" label="Cancel" onclick={closeFeedbackModal}
                                            class="slds-m-left_x-small"></lightning-button>
                                        <lightning-button variant="brand" label="Submit" onclick={handlefeedbacksubmit}
                                            class="slds-m-left_x-small"></lightning-button>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={shownewfollowupModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handlenewfollowupcancelClick}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Action To be taken</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" options={todayfollowupchooseoptions}
                                            value={todayfollowupchooseoptionsvalue}
                                            onchange={todayfollowupchooseoptionshandlechange} type="radio">
                                        </lightning-radio-group>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">

                                    </footer>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={newfollowupModal}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handlenewfollowupcancelClick}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <!--  <lightning-input type="text" label="Enter Followup" value={newfollowupname}
                                            onchange={followupnamehandler}></lightning-input>-->
                                        <lightning-input type="datetime" name="input2" label="Followup Date"
                                            value={newfollowupdate} onchange={followupdatehandle}></lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>
                                        <lightning-input type="text" label="Follow up Feedback"
                                            value={newFollowupfeedbck} onchange={followupfeedbackHandler}
                                            min={todaysDate}>
                                        </lightning-input>
                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={newfollowupsubmit} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel" title="Successful action"
                                            onclick={handlenewfollowupcancelClick} class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={isshowTestRideModalstore}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRidestrore}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New TestRide</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input type="text" label="Lead Name" disabled value={LeadName}
                                            minlength="3">
                                        </lightning-input>
                                        <!-- <lightning-input type="text" label="Test ride executive's Name"
                                            value={storeExcutiveName} onchange={handlestoreExcutiveName} minlength="3">
                                        </lightning-input> -->
                                        <!-- <lightning-input type="text" label="DL Number" value={storedlnumber}
                                            onchange={storehandledlnumber} minlength="3"></lightning-input>
                                        <template if:true={errorMessage}>
                                            <p class="slds-text-color_error">{errorMessage}</p>
                                        </template>
                                        <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            value={storeIndemnity} onchange={handlestoreCheckboxChange} unchecked
                                            required></lightning-input> -->



                                        <lightning-input type="datetime" label="Test Ride Date"
                                            value={testridestorevaluedate} onchange={testridestorevaluedatehandle}>

                                        </lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>

                                    </div>
                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={todaysfollowuphandlestoresaveClick} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel" title="Successful action"
                                            onclick={cancelNewTestRidestrore} class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>

                        <template if:true={isshowTestRideModalhome}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open ">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={cancelNewTestRidehome}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>

                                        <h2 class="slds-text-heading_medium">New TestRide</h2>
                                    </header>

                                    <!-- <lightning-layout multiple-rows="true">-->
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-input type="text" label="Lead Name" disabled value={LeadName}
                                            minlength="3">
                                        </lightning-input>
                                        <!-- <lightning-input type="text" label="Test ride executive's Name"
                                            value={homeExcutiveName} onchange={handlehomeExcutiveName} minlength="3">
                                        </lightning-input> -->
                                        <!-- <lightning-input type="text" label="DL Number" value={homedlnumber}
                                    onchange={homehandledlnumber} minlength="3"></lightning-input>
                                <template if:true={errorMessage}>
                                    <p class="slds-text-color_error">{errorMessage}</p>
                                </template> -->
                                        <!-- <lightning-input type="checkbox" label="Indemnity Form Signed"
                                            value={homeIndemnity} onchange={handlehomeCheckboxChange} unchecked
                                            required></lightning-input>-->
                                        <lightning-input type="datetime" name="input2" label="Test Ride Date"
                                            value={testridehomevaluedate} onchange={testridehomevaluedatehandle}
                                            minlength={todaysDate}>
                                        </lightning-input>
                                        <template if:true={errordateMessage}>
                                            <p class="slds-text-color_error">{errordateMessage}</p>
                                        </template>


                                        <lightning-card title="Address">
                                            <div class="slds-p-around_medium">


                                                <lightning-textarea type="text" label="Street" value={street}
                                                    onchange={handlestreet}>
                                                </lightning-textarea>
                                                <lightning-layout>
                                                    <lightning-layout-item padding="around-small" size="6">
                                                        <lightning-input type="text" label="City" value={city}
                                                            onchange={handlecity}>
                                                        </lightning-input>
                                                    </lightning-layout-item>
                                                    <lightning-layout-item padding="around-small" size="6">
                                                        <lightning-combobox name="progress" label="Country"
                                                            value={country} options={countryoptions}
                                                            onchange={handlecountry}>
                                                        </lightning-combobox>
                                                    </lightning-layout-item>
                                                </lightning-layout>
                                                <lightning-layout>
                                                    <lightning-layout-item padding="around-small" size="6">
                                                        <lightning-input type="text" label="Postal Code"
                                                            value={postalCode} onchange={handlepostalcode}>
                                                        </lightning-input>
                                                    </lightning-layout-item>
                                                    <lightning-layout-item padding="around-small" size="6">
                                                        <lightning-combobox name="progress" label="State" value={state}
                                                            options={stateoptions} onchange={handlestate}>
                                                        </lightning-combobox>
                                                    </lightning-layout-item>
                                                </lightning-layout>
                                            </div>
                                        </lightning-card>

                                        <footer class="slds-modal__footer slds-text-align_center">
                                            <lightning-button variant="success" label="Save" title="Successful action"
                                                onclick={todaysfollowuphandlehomesaveClick} class="slds-m-left_x-small">
                                            </lightning-button>
                                            <lightning-button variant="destructive" label="Cancel"
                                                title="Successful action" onclick={cancelNewTestRidehome}
                                                class="slds-m-left_x-small">
                                            </lightning-button>

                                        </footer>
                                    </div>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={Ridetypetrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowupRidetypetruecancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">New Follow UP</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-radio-group name="radioGroup" label="Select Test Ride Type"
                                            options={Ridetypeoptions} value={Ridetypevale}
                                            onchange={Ridetypeoptionschange} required type="radio">
                                        </lightning-radio-group>
                                    </div>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>
                        <template if:true={lostleadtrue}>
                            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={todaysfollowuplostleadcancel}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                                        <h2 class="slds-text-heading_medium">Lead Lost</h2>
                                    </header>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <lightning-combobox name="progress" label="Reason" value={reasonvalue}
                                            options={reasonoptions} onchange={reasonhandleChange}></lightning-combobox>

                                        <lightning-input type="text" label="Cancel For Reason" value={leadcancelreason}
                                            onchange={handleleadcancelreason} required minlength="6"></lightning-input>
                                    </div>

                                    <footer class="slds-modal__footer slds-text-align_center">
                                        <lightning-button variant="success" label="Save" title="Successful action"
                                            onclick={todaysfollowuplostleadsave} class="slds-m-left_x-small">
                                        </lightning-button>
                                        <lightning-button variant="destructive" label="Cancel" title="Successful action"
                                            onclick={todaysfollowuplostleadcancel} class="slds-m-left_x-small">
                                        </lightning-button>

                                    </footer>

                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                        </template>



                    </lightning-card>

                </div>
            </div>
        </lightning-layout-item>
    </lightning-layout>


</template>