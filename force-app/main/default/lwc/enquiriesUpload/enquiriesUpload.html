<template>
    <lightning-card title="Dynamic Data Uploader" icon-name="custom:custom63">

        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Uploading..." size="medium"></lightning-spinner>
        </template>

        <div class="slds-p-around_medium">
            <lightning-combobox name="object" label="Select Object" value={selectedObject} options={objectOptions}
                onchange={handleObjectChange}>
            </lightning-combobox>

            <br />

            <lightning-button variant="brand" label="Download Format" onclick={handleClick}></lightning-button>

            <br />
            <lightning-input type="file" label="Upload CSV" onchange={handleFileChange} accept=".csv"
                disabled={checkTime}></lightning-input>
        </div>

        <template if:true={columnHeaders.length}>
            <lightning-layout multiple-rows class="slds-p-around_medium">
                <template for:each={columnHeaders} for:item="col">
                    <lightning-layout-item key={col} size="12" padding="around-small">
                        <lightning-combobox label={col} data-column={col} options={filteredFieldOptions}
                            onchange={handleFieldMappingChange} oninput={handleFieldSearch}>
                        </lightning-combobox>
                    </lightning-layout-item>
                </template>
            </lightning-layout>

            <div class="slds-p-around_medium">
                <lightning-button variant="brand" label="Upload Data" onclick={handleUpload}
                    disabled={checkTime}></lightning-button>
            </div>
        </template>
    </lightning-card>
</template>